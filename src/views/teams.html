<div ng-controller="teamsCtrl" id="teams">
    <p class="pull-right">
        <button ng-class="{active:editMode}" class="btn" ng-click="editMode=!editMode">
            <i class="icon-edit"></i> Edit
        </button>
    </p>
    <p class="pull-right">
        <button class="btn" ng-click="load()">
            <i class="icon-cloud-download"></i>
            Load
        </button>
    </p>
    <h5>&nbsp;<i ng-show="saving" class="icon-save"></i></h5>
    <div class="alert alert-info" ng-show="status">
        <button type="button" class="close" ng-click="status=''">&times;</button>
        {{status}}
    </div>
    <form class="form-inline" name="newTeamForm" ng-show="editMode">
        <p>
            <span class="control-group" ng-class="{error:!newTeamForm.newTeamNumber.$valid}">
                <label class="control-label">
                    Number:
                    <input type="text" name="newTeamNumber" ng-pattern="teamNumberPattern" class="input-small" ng-model="newTeam.number" size="4" required>
                </label>
            </span>
            <span class="control-group">
                <label class="control-label">
                    Name:
                    <input type="text" ng-model="newTeam.name" required>
                </label>
            </span>
            <button class="btn" ng-click="addTeam()" ng-disabled="!newTeamForm.$valid">Add team</button>
        </p>
    </form>

    <table class="table table-bordered table-striped table-teams smallLayoutHide mediumLayoutHide">
        <thead>
            <tr>
                <th ng-click="sort='team.number';rev=true">#</th>
                <th ng-click="sort='team.name';rev=false">Name</th>
                <th ng-click="sort='team.affiliation';rev=false">Affiliation</th>
                <th ng-click="sort='team.cityState';rev=false">City (State)</th>
                <th ng-click="sort='team.country';rev=false">Country</th>
                <th ng-click="sort='team.coach1';rev=false">Coach 1</th>
                <th ng-click="sort='team.coach2';rev=false">Coach 2</th>
                <th ng-click="sort='team.judgingGroup';rev=false">Judging Group</th>
                <th ng-click="sort='team.pitLocation';rev=false">Pit Location</th>
                <th ng-click="sort='team.translationNeeded';rev=false">Translation</th>
                <th></th>
            </tr>
        </thead>
        <tr ng-repeat="team in teams | index | orderBy:sort:rev">
            <td>{{team.number}}</td>
            <td>{{team.name}}</td>
            <td>{{team.cityState}}</td>
            <td>{{team.country}}</td>
            <td>{{team.affiliation}}</td>
            <td>{{team.coach1}}</td>
            <td>{{team.coach2}}</td>
            <td>{{team.judgingGroup}}</td>
            <td>{{team.pitLocation}}</td>
            <td><i ng-show="team.translationNeeded===true" class="icon-ok"></i></td>
            <td>
                <span ng-show="editMode">
                    <i class="icon-trash clickable" title="delete" fll-really-message="Sure to delete this team?" fll-really-click="removeTeam($index)"></i>
                </span>
            </td>
        </tr>
    </table>
    <div class="largeLayoutHide">
        <div class="team clickable" ng-repeat="team in teams | index | orderBy:sort:ref" ng-click="isCollapsed = !isCollapsed">
            ({{team.number}}) {{team.name}}, {{team.cityState}}
            <button class="btn" ng-class="{active:isCollapsed}">+</button>
            <div ng-class="{collapse:!isCollapsed}" class="extended">
                <div>
                    <span class="title">Country</span>
                    {{team.country}}
                </div>
                <div>
                    <span class="title">Affiliation</span>
                    {{team.affiliation}}
                </div>
                <div>
                    <span class="title">Coach 1</span>
                    {{team.coach1}}
                </div>
                <div>
                    <span class="title">Coach 2</span>
                    {{team.coach2}}
                </div>
                <div>
                    <span class="title">Judging group</span>
                    {{team.judgingGroup}}
                </div>
                <div>
                    <span class="title">Pit location</span>
                    {{team.pitLocation}}
                </div>
                <div>
                    <span class="title">Translation needed</span>
                    <span ng-show="team.translationNeeded===true"><i class="icon-ok"></i></span>
                </div>
        </div>
    </div>
</div>
